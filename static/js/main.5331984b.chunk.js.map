{"version":3,"sources":["utils/useMouse.ts","utils/useKeyPress.ts","models/Pumpkman.tsx","components/Character.tsx","utils/levelConverter.ts","data/farm.png","models/Farm.tsx","components/Level.tsx","reportWebVitals.ts","components/GameScene.tsx","core/Game.tsx","App.tsx","index.tsx"],"names":["mouseButtonMap","useKeyPress","key","useState","isDown","set","keys","Array","isArray","handleKeyDown","useCallback","event","includes","code","handleKeyUp","handleWindowBlur","useEffect","window","addEventListener","removeEventListener","Pumpkman","group","useRef","useGLTF","nodes","materials","ref","dispose","rotation","Math","PI","position","scale","geometry","Cube","material","head","Cube_1","tail","Cube_2","eyes","Cube_3","body","vest","pants","preload","CharacterState","pigSize","pigLegSize","Character","moveTarget","box","up","down","left","right","velocity","useControls","maxSpeed","minSpeed","acceleration","slowdown","rotationSpeed","useKeys","useKeysTurningCoeff","turning","characterState","IDLE","forwardVector","Vector3","direction","targetPosition","remainedDistance","targetRotationAngle","current","SLOWDOWN","ACCELERATION","setY","subVectors","normalize","copy","getWorldDirection","angleTo","clone","cross","y","useFrame","state","delta","lerp","RUN","MIN_SPEED","distanceTo","diff","addScaledVector","setRotationFromAxisAngle","atan2","x","z","angleDiff","abs","rotateOnAxis","args","attach","color","loadImage","src","Promise","resolve","reject","img","Image","onload","onerror","colorMap","splitArray","array","chunkSize","result","i","length","push","slice","parseImage","a","image","inputCanvas","document","createElement","context","getContext","width","height","drawImage","imageData","getImageData","data","from","mapImageToLevel","map","row","item","join","Farm","ground","grass","barn003_1","barn003_2","barn001_1","barn001_2","barn002_1","barn002_2","wheat1","wheat2","wheat4","wheat3","Corn1","Corn2","Corn4","Corn3","Hedge","Bush001","Bush002","Bush003","Bush004","Bush005","Bush006","Bush007","Bush008","Bush009","Bush010","Bush011","Bush012","Bush013","Bush014","Bush015","Bush016","Bush017","Bush018","Bush019","Bush020","Bush021","Bush022","Bush023","Bush024","Bush025","Bush026","Bush027","Bush028","Bush029","Bush030","Bush031","Bush032","Bush033","Bush034","Bush035","Bush036","onPerfEntry","Level","level","setLevel","then","loadedLevel","useMemo","GameScene","children","mouseUp","isFired","handleMouseUp","button","useMouse","moving","setMoving","followMouse","setMoveTarget","target","intensity","Game","onCreated","gl","setClearColor","PerspectiveCamera","makeDefault","zoom","MapControls","enabled","fallback","App","style","ReactDOM","render","StrictMode","getElementById","Function","getCLS","getFID","getFCP","getLCP","getTTFB"],"mappings":"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","file":"static/js/main.5331984b.chunk.js","sourcesContent":["import { useCallback, useEffect, useState } from 'react';\n\nconst mouseButtonMap = [\n  'Left',\n];\n\nexport const useMouse = (key: string | string[]): boolean => {\n  const [isFired, set] = useState(false);\n  const keys = (Array.isArray(key) ? key : [key]);\n\n  const handleMouseUp = useCallback(\n    (event: MouseEvent) => {\n      if (!isFired && keys.includes(mouseButtonMap[event.button])) {\n        set(true);\n      }\n    },\n    [...keys, isFired],\n  );\n\n  useEffect(() => {\n    window.addEventListener('mouseup', handleMouseUp);\n    return () => {\n      window.removeEventListener('mouseup', handleMouseUp);\n    };\n  }, [handleMouseUp]);\n\n  return isFired;\n};\n","import { useCallback, useEffect, useState } from 'react';\n\nexport const useKeyPress = (key: string | string[]): boolean => {\n  const [isDown, set] = useState(false);\n  const keys = Array.isArray(key) ? key : [key];\n\n  const handleKeyDown = useCallback(\n    (event: KeyboardEvent) => {\n      if (!isDown && keys.includes(event.code)) {\n        set(true);\n      }\n    },\n    [...keys, isDown],\n  );\n  const handleKeyUp = useCallback(\n    (event: KeyboardEvent) => {\n      if (isDown && keys.includes(event.code)) {\n        set(false);\n      }\n    },\n    [...keys, isDown],\n  );\n\n  const handleWindowBlur = useCallback(() => {\n    set(false);\n  }, []);\n\n  useEffect(() => {\n    window.addEventListener('keydown', handleKeyDown);\n    window.addEventListener('keyup', handleKeyUp);\n    window.addEventListener('blur', handleWindowBlur);\n    return () => {\n      window.removeEventListener('keydown', handleKeyDown);\n      window.removeEventListener('keyup', handleKeyUp);\n      window.removeEventListener('blur', handleWindowBlur);\n    };\n  }, [handleKeyDown, handleKeyUp, handleWindowBlur]);\n\n  return isDown;\n};\n","/*\nAuto-generated by: https://github.com/pmndrs/gltfjsx\n*/\n\nimport * as THREE from 'three';\nimport React, { useRef } from 'react';\nimport { useGLTF } from '@react-three/drei';\nimport { GLTF } from 'three/examples/jsm/loaders/GLTFLoader';\n\ntype GLTFResult = GLTF & {\n  nodes: {\n    Cube: THREE.Mesh\n    Cube_1: THREE.Mesh\n    Cube_2: THREE.Mesh\n    Cube_3: THREE.Mesh\n    vest: THREE.Mesh\n    pants: THREE.Mesh\n    pig: THREE.Mesh\n  }\n  materials: {\n    head: THREE.MeshStandardMaterial\n    tail: THREE.MeshStandardMaterial\n    eyes: THREE.MeshStandardMaterial\n    body: THREE.MeshStandardMaterial\n    vest: THREE.MeshStandardMaterial\n  }\n};\n\nexport const Pumpkman = () => {\n  const group = useRef<THREE.Group>();\n  const { nodes, materials } = useGLTF('/free-to-pay/models/pumpkman.glb') as GLTFResult;\n  return (\n    <group ref={group} dispose={null} rotation={[0, -Math.PI / 2, 0]} position={[0, -0.5, 0]}>\n      <group position={[-0.2, 2.41, 0]} scale={[0.21, 0.21, 0.21]}>\n        <mesh geometry={nodes.Cube.geometry} material={materials.head} />\n        <mesh geometry={nodes.Cube_1.geometry} material={materials.tail} />\n        <mesh geometry={nodes.Cube_2.geometry} material={materials.eyes} />\n        <mesh geometry={nodes.Cube_3.geometry} material={materials.body} />\n      </group>\n      <mesh\n        geometry={nodes.vest.geometry}\n        material={nodes.vest.material}\n        position={[-0.2, 2.41, 0]}\n        scale={[0.21, 0.21, 0.21]}\n      />\n      <mesh\n        geometry={nodes.pants.geometry}\n        material={nodes.pants.material}\n        position={[-0.2, 2.41, 0]}\n        scale={[0.21, 0.21, 0.21]}\n      />\n    </group>\n  );\n};\n\nuseGLTF.preload('/free-to-pay/models/pumpkman.glb');\n","import React, { useEffect, useRef } from 'react';\nimport { Mesh, Vector3 } from 'three';\nimport { Cylinder } from '@react-three/drei';\nimport { useFrame } from '@react-three/fiber';\nimport { useControls } from 'leva';\nimport { useKeyPress } from '../utils/useKeyPress';\nimport { Pumpkman } from '../models/Pumpkman';\n\nconst pigSize: [number, number, number] = [0.5, 0.4, 1.2];\nconst pigLegSize: [number, number, number] = [0.2, 0.1, 0.6];\n\nenum CharacterState {\n  IDLE,\n  ACCELERATION,\n  RUN,\n  SLOWDOWN,\n  MIN_SPEED,\n}\n\nexport interface CharacterProps {\n  moveTarget: Vector3 | null;\n}\n\nexport const Character: React.FC<CharacterProps> = ({ moveTarget }: CharacterProps) => {\n  const box = useRef<Mesh>(null!);\n  const elevation = 0.75;\n\n  const up = useKeyPress(['ArrowUp', 'KeyW']);\n  const down = useKeyPress(['ArrowDown', 'KeyS']);\n  const left = useKeyPress(['ArrowLeft', 'KeyA']);\n  const right = useKeyPress(['ArrowRight', 'KeyD']);\n  const velocity = useRef(0);\n  const {\n    maxSpeed,\n    minSpeed,\n    acceleration,\n    slowdown,\n    rotationSpeed,\n    useKeys,\n    useKeysTurningCoeff,\n  } = useControls(\n    {\n      maxSpeed: 10,\n      minSpeed: 1,\n      acceleration: 20,\n      slowdown: 20,\n      rotationSpeed: 5,\n      useKeys: false,\n      useKeysTurningCoeff: 50,\n    },\n  );\n  const turning = useRef(false);\n  const characterState = useRef(CharacterState.IDLE);\n\n  const forwardVector = useRef(new Vector3(0, 0, 0));\n  const direction = useRef(new Vector3(0, 0, 0));\n  const targetPosition = useRef(new Vector3(0, 0, 0));\n  const remainedDistance = useRef(0);\n  const targetRotationAngle = useRef(0);\n\n  useEffect(() => {\n    if (moveTarget && !useKeys) {\n      if (characterState.current === CharacterState.IDLE\n        || characterState.current === CharacterState.SLOWDOWN) {\n        characterState.current = CharacterState.ACCELERATION;\n      }\n\n      turning.current = true;\n      moveTarget.setY(elevation);\n      direction.current.subVectors(moveTarget, box.current.position).normalize();\n      targetPosition.current.copy(moveTarget);\n      box.current.getWorldDirection(forwardVector.current);\n      targetRotationAngle.current = direction.current.angleTo(forwardVector.current);\n      if (direction.current.clone().cross(forwardVector.current).y > 0) {\n        targetRotationAngle.current = -targetRotationAngle.current;\n      }\n    }\n  }, [moveTarget]);\n\n  useFrame((state, delta) => {\n    if (useKeys) {\n      if (up || left || right || down) {\n        if (characterState.current === CharacterState.IDLE\n          || characterState.current === CharacterState.SLOWDOWN) {\n          characterState.current = CharacterState.ACCELERATION;\n        }\n\n        direction.current.lerp(new Vector3(\n          (-left + (+right)),\n          0,\n          (-up + (+down)),\n        ).normalize(), 1 / useKeysTurningCoeff).normalize();\n\n        turning.current = true;\n      } else if (characterState.current === CharacterState.RUN\n        || characterState.current === CharacterState.ACCELERATION) {\n        characterState.current = CharacterState.SLOWDOWN;\n      }\n    }\n\n    // Movement\n\n    switch (characterState.current) {\n      case CharacterState.ACCELERATION:\n        velocity.current += acceleration * delta;\n        if (velocity.current >= maxSpeed) {\n          velocity.current = maxSpeed;\n          characterState.current = CharacterState.RUN;\n        }\n        break;\n      case CharacterState.RUN:\n        break;\n      case CharacterState.SLOWDOWN:\n        velocity.current -= slowdown * delta;\n        if (!useKeys) {\n          if (velocity.current <= minSpeed) {\n            velocity.current = minSpeed;\n            characterState.current = CharacterState.MIN_SPEED;\n          }\n        } else if (velocity.current <= 0) {\n          velocity.current = 0;\n          characterState.current = CharacterState.IDLE;\n        }\n\n        break;\n      case CharacterState.MIN_SPEED:\n      case CharacterState.IDLE:\n      default:\n        break;\n    }\n\n    if (characterState.current !== CharacterState.IDLE) {\n      if (!useKeys) {\n        remainedDistance.current = targetPosition.current.distanceTo(box.current.position);\n        if (remainedDistance.current < (maxSpeed * maxSpeed) / (2 * slowdown)) {\n          characterState.current = CharacterState.SLOWDOWN;\n        }\n\n        const diff = delta * velocity.current;\n        if (remainedDistance.current < diff) {\n          box.current.position.copy(targetPosition.current);\n          velocity.current = 0;\n          characterState.current = CharacterState.IDLE;\n        } else {\n          box.current.position.addScaledVector(direction.current, diff);\n        }\n      }\n      if (useKeys) {\n        const diff = delta * velocity.current;\n        box.current.position.addScaledVector(direction.current, diff);\n      }\n    }\n\n    // Turning\n\n    if (turning.current) {\n      if (!useKeys) {\n        box.current.getWorldDirection(forwardVector.current);\n        const angleDiff = delta * rotationSpeed;\n        if (Math.abs(targetRotationAngle.current) < angleDiff) {\n          box.current.rotateOnAxis(new Vector3(0, 1, 0), targetRotationAngle.current);\n          turning.current = false;\n        } else if (targetRotationAngle.current > 0) {\n          targetRotationAngle.current -= angleDiff;\n          box.current.rotateOnAxis(new Vector3(0, 1, 0), angleDiff);\n        } else {\n          targetRotationAngle.current += angleDiff;\n          box.current.rotateOnAxis(new Vector3(0, 1, 0), -angleDiff);\n        }\n      } else {\n        box.current.setRotationFromAxisAngle(\n          new Vector3(0, 1, 0),\n          Math.atan2(direction.current.x, direction.current.z),\n        );\n      }\n    }\n  });\n\n  return (\n    <group ref={box} position={[0, elevation, 0]}>\n      <Cylinder args={pigSize} rotation={[Math.PI / 2, 0, 0]} position={[0, 0, 0]}>\n        <meshStandardMaterial attach=\"material\" color=\"pink\" />\n      </Cylinder>\n      <Cylinder args={[0.2, 0.4, 0.8]} rotation={[Math.PI / 2, 0, 0]} position={[0, 0.1, 0.75]}>\n        <meshStandardMaterial attach=\"material\" color=\"pink\" />\n      </Cylinder>\n      <Cylinder args={pigLegSize} position={[0.2, -0.5, 0.3]}>\n        <meshStandardMaterial attach=\"material\" color=\"pink\" />\n      </Cylinder>\n      <Cylinder args={pigLegSize} position={[-0.2, -0.5, 0.3]}>\n        <meshStandardMaterial attach=\"material\" color=\"pink\" />\n      </Cylinder>\n      <Cylinder args={pigLegSize} position={[0.2, -0.5, -0.2]}>\n        <meshStandardMaterial attach=\"material\" color=\"pink\" />\n      </Cylinder>\n      <Cylinder args={pigLegSize} position={[-0.2, -0.5, -0.2]}>\n        <meshStandardMaterial attach=\"material\" color=\"pink\" />\n      </Cylinder>\n\n      <group>\n        <Pumpkman />\n      </group>\n    </group>\n  );\n};\n","import levelImage from '../data/farm.png';\n\nconst loadImage: (src: string) => Promise<HTMLImageElement> = (src) => new Promise((\n  resolve,\n  reject,\n) => {\n  const img = new Image();\n  img.onload = () => resolve(img);\n  img.onerror = reject;\n  img.src = src;\n});\n\nconst colorMap: { [key: string]: string } = {\n  '255,255,255,255': '⬜', // space\n  '255,242,0,255': '🌾', // collectible\n  '34,177,76,255': '🌲',\n  '181,230,29,255': '🟩',\n};\n\nconst splitArray: <T>(\n  array: T[],\n  chunkSize: number\n) => T[][] = (array, chunkSize) => {\n  const result = [];\n  for (let i = 0; i < array.length; i += chunkSize) {\n    result.push(array.slice(i, i + chunkSize));\n  }\n  return result;\n};\n\nexport const parseImage = async () => {\n  const image = await loadImage(levelImage);\n  const inputCanvas = document.createElement('canvas');\n  const context = inputCanvas.getContext('2d');\n  if (!context) { return []; }\n  const { width, height } = image;\n  context.drawImage(image, 0, 0, width, height);\n  const imageData = context.getImageData(0, 0, width, height).data;\n  return splitArray(splitArray(Array.from(imageData), 4), width);\n};\n\nexport const mapImageToLevel = async () => (await parseImage())\n  .map((row) => row\n    .map((item) => item.join())\n    .map((item) => {\n      if (!colorMap[item]) {\n        colorMap[item] = '?';\n      }\n      return colorMap[item];\n    }));\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsIAAA7CARUoSoAAAAFeSURBVGhD7ZjBDcIwEAQDb1rgQwO8aALRCtVQCR+a4EUNtMAfdCEnnS72+ZBIvHY8UuQEEbLr3TgRq9319O4qYD2MxdOMoDG6Ry6Hx7CHzfm+H/a+1J/IcfPsR+b22vbjvz630LMdakm1iTQjU0JVkpuHlggazQga1RhpryhoLNcIRSo3FEwjSEJTmEZKufGJoBFOQibC+/IdaA6j3lYsa/n1zsrUWDqiRvgkGnOkFBJt6Yga4ZPmMqGFy+taSTCuas2BnjAp3jOZWY2wWD0SIfFWMtCrFgmP6dGmYKoVgk1YSTBQRqRgue9pSZZq6Rn2XJPOkd/TvwFdLYIFp8zCG7FSkECuWrpGIbSpn43k/nOb9Wkj0NXSYq1JLuI54gHOiE6Bj/XnGjgjOgU+TqUDv/wyRSUSqxVRVCKxWnmArlaoTrGKwT3ZSahHgzYEv2p5GSVSKsUsvymaESy67gMGb8CnCuHOmwAAAABJRU5ErkJggg==\"","/*\nAuto-generated by: https://github.com/pmndrs/gltfjsx\n*/\n\nimport * as THREE from 'three';\nimport React, { useRef } from 'react';\nimport { useGLTF } from '@react-three/drei';\nimport { GLTF } from 'three/examples/jsm/loaders/GLTFLoader';\n\ntype GLTFResult = GLTF & {\n  nodes: {\n    ground: THREE.Mesh\n    barn003_1: THREE.Mesh\n    barn003_2: THREE.Mesh\n    barn001_1: THREE.Mesh\n    barn001_2: THREE.Mesh\n    barn002_1: THREE.Mesh\n    barn002_2: THREE.Mesh\n    wheat1: THREE.Mesh\n    wheat2: THREE.Mesh\n    wheat4: THREE.Mesh\n    wheat3: THREE.Mesh\n    Corn1: THREE.Mesh\n    Corn2: THREE.Mesh\n    Corn4: THREE.Mesh\n    Corn3: THREE.Mesh\n    Hedge: THREE.Mesh\n    Bush001: THREE.Mesh\n    Bush002: THREE.Mesh\n    Bush003: THREE.Mesh\n    Bush004: THREE.Mesh\n    Bush005: THREE.Mesh\n    Bush006: THREE.Mesh\n    Bush007: THREE.Mesh\n    Bush008: THREE.Mesh\n    Bush009: THREE.Mesh\n    Bush010: THREE.Mesh\n    Bush011: THREE.Mesh\n    Bush012: THREE.Mesh\n    Bush013: THREE.Mesh\n    Bush014: THREE.Mesh\n    Bush015: THREE.Mesh\n    Bush016: THREE.Mesh\n    Bush017: THREE.Mesh\n    Bush018: THREE.Mesh\n    Bush019: THREE.Mesh\n    Bush020: THREE.Mesh\n    Bush021: THREE.Mesh\n    Bush022: THREE.Mesh\n    Bush023: THREE.Mesh\n    Bush024: THREE.Mesh\n    Bush025: THREE.Mesh\n    Bush026: THREE.Mesh\n    Bush027: THREE.Mesh\n    Bush028: THREE.Mesh\n    Bush029: THREE.Mesh\n    Bush030: THREE.Mesh\n    Bush031: THREE.Mesh\n    Bush032: THREE.Mesh\n    Bush033: THREE.Mesh\n    Bush034: THREE.Mesh\n    Bush035: THREE.Mesh\n    Bush036: THREE.Mesh\n  }\n  materials: {\n    grass: THREE.MeshStandardMaterial\n    barnRoof: THREE.MeshStandardMaterial\n    barnWood: THREE.MeshStandardMaterial\n    wheat: THREE.MeshStandardMaterial\n    corn: THREE.MeshStandardMaterial\n    hedge: THREE.MeshStandardMaterial\n  }\n};\n\nexport const Farm = () => {\n  const group = useRef<THREE.Group>();\n  const { nodes, materials } = useGLTF('/free-to-pay/models/farm.glb') as GLTFResult;\n  return (\n    <group ref={group} dispose={null}>\n      <mesh\n        geometry={nodes.ground.geometry}\n        material={materials.grass}\n        position={[-4.4, 0, -2.68]}\n        scale={[2, 2, 2]}\n      />\n      <group position={[21.62, 6.01, -38.72]} scale={[2, 2, 2]}>\n        <mesh geometry={nodes.barn003_1.geometry} material={nodes.barn003_1.material} />\n        <mesh geometry={nodes.barn003_2.geometry} material={nodes.barn003_2.material} />\n      </group>\n      <group position={[-28.46, 6.01, -14.71]} scale={[2, 2, 2]}>\n        <mesh geometry={nodes.barn001_1.geometry} material={nodes.barn001_1.material} />\n        <mesh geometry={nodes.barn001_2.geometry} material={nodes.barn001_2.material} />\n      </group>\n      <group position={[5.89, 6.01, 11.1]} scale={[2, 2, 2]}>\n        <mesh geometry={nodes.barn002_1.geometry} material={nodes.barn002_1.material} />\n        <mesh geometry={nodes.barn002_2.geometry} material={nodes.barn002_2.material} />\n      </group>\n      <mesh\n        geometry={nodes.wheat1.geometry}\n        material={nodes.wheat1.material}\n        position={[-29.69, 1, 18.61]}\n        scale={[2, 2, 2]}\n      />\n      <mesh\n        geometry={nodes.wheat2.geometry}\n        material={nodes.wheat2.material}\n        position={[-17.49, 1, 18.61]}\n        scale={[2, 2, 2]}\n      />\n      <mesh\n        geometry={nodes.wheat4.geometry}\n        material={nodes.wheat4.material}\n        position={[-5.56, 1, 18.61]}\n        scale={[2, 2, 2]}\n      />\n      <mesh\n        geometry={nodes.wheat3.geometry}\n        material={nodes.wheat3.material}\n        position={[6.37, 1, 18.61]}\n        scale={[2, 2, 2]}\n      />\n      <mesh\n        geometry={nodes.Corn1.geometry}\n        material={nodes.Corn1.material}\n        position={[-41.55, 1, -39.58]}\n        scale={[2, 2, 2]}\n      />\n      <mesh\n        geometry={nodes.Corn2.geometry}\n        material={nodes.Corn2.material}\n        position={[-29.35, 1, -39.58]}\n        scale={[2, 2, 2]}\n      />\n      <mesh\n        geometry={nodes.Corn4.geometry}\n        material={nodes.Corn4.material}\n        position={[-5.49, 1, -39.58]}\n        scale={[2, 2, 2]}\n      />\n      <mesh\n        geometry={nodes.Corn3.geometry}\n        material={nodes.Corn3.material}\n        position={[-17.42, 1, -39.58]}\n        scale={[2, 2, 2]}\n      />\n      <mesh\n        geometry={nodes.Hedge.geometry}\n        material={nodes.Hedge.material}\n        position={[-53.47, 1, -51.5]}\n        scale={[2, 2, 2]}\n      />\n      <mesh\n        geometry={nodes.Bush001.geometry}\n        material={nodes.Bush001.material}\n        position={[-37.4, 1, -3.68]}\n        scale={[2, 2, 2]}\n      />\n      <mesh\n        geometry={nodes.Bush002.geometry}\n        material={nodes.Bush002.material}\n        position={[-41.4, 1, -3.68]}\n        scale={[2, 2, 2]}\n      />\n      <mesh\n        geometry={nodes.Bush003.geometry}\n        material={nodes.Bush003.material}\n        position={[-35.4, 1, -5.68]}\n        scale={[2, 2, 2]}\n      />\n      <mesh\n        geometry={nodes.Bush004.geometry}\n        material={nodes.Bush004.material}\n        position={[-33.4, 1, -9.68]}\n        scale={[2, 2, 2]}\n      />\n      <mesh\n        geometry={nodes.Bush005.geometry}\n        material={nodes.Bush005.material}\n        position={[-39.4, 1, -9.68]}\n        scale={[2, 2, 2]}\n      />\n      <mesh\n        geometry={nodes.Bush006.geometry}\n        material={nodes.Bush006.material}\n        position={[-43.4, 1, -9.68]}\n        scale={[2, 2, 2]}\n      />\n      <mesh\n        geometry={nodes.Bush007.geometry}\n        material={nodes.Bush007.material}\n        position={[-39.4, 1, -13.68]}\n        scale={[2, 2, 2]}\n      />\n      <mesh\n        geometry={nodes.Bush008.geometry}\n        material={nodes.Bush008.material}\n        position={[8.6, 1, 2.32]}\n        scale={[2, 2, 2]}\n      />\n      <mesh\n        geometry={nodes.Bush009.geometry}\n        material={nodes.Bush009.material}\n        position={[12.6, 1, 2.32]}\n        scale={[2, 2, 2]}\n      />\n      <mesh\n        geometry={nodes.Bush010.geometry}\n        material={nodes.Bush010.material}\n        position={[14.6, 1, -1.68]}\n        scale={[2, 2, 2]}\n      />\n      <mesh\n        geometry={nodes.Bush011.geometry}\n        material={nodes.Bush011.material}\n        position={[22.6, 1, -3.68]}\n        scale={[2, 2, 2]}\n      />\n      <mesh\n        geometry={nodes.Bush012.geometry}\n        material={nodes.Bush012.material}\n        position={[26.6, 1, -9.68]}\n        scale={[2, 2, 2]}\n      />\n      <mesh\n        geometry={nodes.Bush013.geometry}\n        material={nodes.Bush013.material}\n        position={[32.6, 1, -5.68]}\n        scale={[2, 2, 2]}\n      />\n      <mesh\n        geometry={nodes.Bush014.geometry}\n        material={nodes.Bush014.material}\n        position={[28.6, 1, -1.68]}\n        scale={[2, 2, 2]}\n      />\n      <mesh\n        geometry={nodes.Bush015.geometry}\n        material={nodes.Bush015.material}\n        position={[22.6, 1, 0.32]}\n        scale={[2, 2, 2]}\n      />\n      <mesh\n        geometry={nodes.Bush016.geometry}\n        material={nodes.Bush016.material}\n        position={[16.6, 1, 2.32]}\n        scale={[2, 2, 2]}\n      />\n      <mesh\n        geometry={nodes.Bush017.geometry}\n        material={nodes.Bush017.material}\n        position={[16.6, 1, 8.32]}\n        scale={[2, 2, 2]}\n      />\n      <mesh\n        geometry={nodes.Bush018.geometry}\n        material={nodes.Bush018.material}\n        position={[22.6, 1, 8.32]}\n        scale={[2, 2, 2]}\n      />\n      <mesh\n        geometry={nodes.Bush019.geometry}\n        material={nodes.Bush019.material}\n        position={[24.6, 1, 4.32]}\n        scale={[2, 2, 2]}\n      />\n      <mesh\n        geometry={nodes.Bush020.geometry}\n        material={nodes.Bush020.material}\n        position={[28.6, 1, 6.32]}\n        scale={[2, 2, 2]}\n      />\n      <mesh\n        geometry={nodes.Bush021.geometry}\n        material={nodes.Bush021.material}\n        position={[32.6, 1, 2.32]}\n        scale={[2, 2, 2]}\n      />\n      <mesh\n        geometry={nodes.Bush022.geometry}\n        material={nodes.Bush022.material}\n        position={[30.6, 1, 10.32]}\n        scale={[2, 2, 2]}\n      />\n      <mesh\n        geometry={nodes.Bush023.geometry}\n        material={nodes.Bush023.material}\n        position={[26.6, 1, 12.32]}\n        scale={[2, 2, 2]}\n      />\n      <mesh\n        geometry={nodes.Bush024.geometry}\n        material={nodes.Bush024.material}\n        position={[32.6, 1, 14.32]}\n        scale={[2, 2, 2]}\n      />\n      <mesh\n        geometry={nodes.Bush025.geometry}\n        material={nodes.Bush025.material}\n        position={[32.6, 1, 18.32]}\n        scale={[2, 2, 2]}\n      />\n      <mesh\n        geometry={nodes.Bush026.geometry}\n        material={nodes.Bush026.material}\n        position={[20.6, 1, 16.32]}\n        scale={[2, 2, 2]}\n      />\n      <mesh\n        geometry={nodes.Bush027.geometry}\n        material={nodes.Bush027.material}\n        position={[24.6, 1, 20.32]}\n        scale={[2, 2, 2]}\n      />\n      <mesh\n        geometry={nodes.Bush028.geometry}\n        material={nodes.Bush028.material}\n        position={[26.6, 1, 24.32]}\n        scale={[2, 2, 2]}\n      />\n      <mesh\n        geometry={nodes.Bush029.geometry}\n        material={nodes.Bush029.material}\n        position={[30.6, 1, 24.32]}\n        scale={[2, 2, 2]}\n      />\n      <mesh\n        geometry={nodes.Bush030.geometry}\n        material={nodes.Bush030.material}\n        position={[18.6, 1, 24.32]}\n        scale={[2, 2, 2]}\n      />\n      <mesh\n        geometry={nodes.Bush031.geometry}\n        material={nodes.Bush031.material}\n        position={[16.6, 1, 30.32]}\n        scale={[2, 2, 2]}\n      />\n      <mesh\n        geometry={nodes.Bush032.geometry}\n        material={nodes.Bush032.material}\n        position={[24.6, 1, 30.32]}\n        scale={[2, 2, 2]}\n      />\n      <mesh\n        geometry={nodes.Bush033.geometry}\n        material={nodes.Bush033.material}\n        position={[30.6, 1, 28.32]}\n        scale={[2, 2, 2]}\n      />\n      <mesh\n        geometry={nodes.Bush034.geometry}\n        material={nodes.Bush034.material}\n        position={[34.6, 1, 34.32]}\n        scale={[2, 2, 2]}\n      />\n      <mesh\n        geometry={nodes.Bush035.geometry}\n        material={nodes.Bush035.material}\n        position={[24.6, 1, 34.32]}\n        scale={[2, 2, 2]}\n      />\n      <mesh\n        geometry={nodes.Bush036.geometry}\n        material={nodes.Bush036.material}\n        position={[18.6, 1, 36.32]}\n        scale={[2, 2, 2]}\n      />\n    </group>\n  );\n};\n\nuseGLTF.preload('/free-to-pay/models/farm.glb');\n","import React, {\n  useEffect, useMemo, useState,\n} from 'react';\nimport { mapImageToLevel } from '../utils/levelConverter';\nimport { Farm } from '../models/Farm';\n\nexport const Level: React.FC = () => {\n  const [level, setLevel] = useState<string[][]>([]);\n\n  useEffect(() => {\n    mapImageToLevel().then((loadedLevel) => setLevel(loadedLevel));\n  });\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  const size = useMemo<[number, number]>(() => ([\n    level.length,\n    level[0]?.length || 0,\n  ]), [level]);\n\n  return (\n    <group>\n      <Farm />\n    </group>\n  );\n};\n","import { ReportHandler } from 'web-vitals';\n\nexport const reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({\n      getCLS, getFID, getFCP, getLCP, getTTFB,\n    }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n","import { useFrame } from '@react-three/fiber';\nimport { useControls } from 'leva';\nimport React, { PropsWithChildren, useCallback, useState } from 'react';\nimport { Vector3 } from 'three';\nimport { useMouse } from '../utils/useMouse';\nimport { Character } from './Character';\nimport { Level } from './Level';\n\ninterface GameSceneProps { }\n\nexport const GameScene: React.FC<GameSceneProps> = ({\n  children,\n}: PropsWithChildren<GameSceneProps>) => {\n  const mouseUp = useMouse(['Left']);\n  const [moving, setMoving] = useState(false);\n\n  const {\n    followMouse,\n  } = useControls(\n    {\n      followMouse: false,\n    },\n  );\n\n  // Тут что-то не так с коллбэками. followMouse и moving не сбрасывают мемоизацию коллбэка.\n  // Что-то я не понимаю до конца в реакте тут, замыкания не замыкаются.\n  // А если followMouse true по умолчанию сделать, то только один раз работает.\n\n  const [moveTarget, setMoveTarget] = useState<Vector3 | null>(null);\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  const onTerrainPointerDown = useCallback((target: Vector3) => {\n    if (followMouse) {\n      setMoving(true);\n    }\n    setMoveTarget(target);\n  }, [followMouse, moving]);\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  const onTerrainPointerMove = useCallback((target: Vector3) => {\n    if (followMouse && moving) {\n      setMoveTarget(target);\n    }\n  }, [followMouse, moving]);\n\n  useFrame(() => {\n    if (mouseUp && moving) {\n      setMoving(false);\n    }\n  });\n\n  return (\n    <>\n      <Level />\n      <pointLight color=\"white\" intensity={2} position={[10, 20, 5]} />\n      <ambientLight color=\"yellow\" intensity={0.2} />\n      <Character moveTarget={moveTarget} />\n      {children}\n    </>\n  );\n};\n","import React, { Suspense } from 'react';\nimport { Canvas } from '@react-three/fiber';\nimport { MapControls, PerspectiveCamera } from '@react-three/drei';\nimport { GameScene } from '../components/GameScene';\n\nexport const Game: React.FC = () => (\n  <Canvas\n    onCreated={({ gl }) => {\n      gl.setClearColor('#000000');\n    }}\n  >\n    <axesHelper />\n    <PerspectiveCamera makeDefault position={[0, 40, 25]} zoom={1.5} />\n    <MapControls enabled />\n    <Suspense fallback={null}>\n      <GameScene />\n    </Suspense>\n  </Canvas>\n);\n","import React from 'react';\nimport { Game } from './core/Game';\n\nexport const App = () => (\n  <div\n    style={{\n      height: '100vh',\n      width: '100vw',\n    }}\n  >\n    <Game />\n  </div>\n);\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport { App } from './App';\nimport { reportWebVitals } from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}