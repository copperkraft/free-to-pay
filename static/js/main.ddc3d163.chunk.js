(this["webpackJsonpfree-to-pay"]=this["webpackJsonpfree-to-pay"]||[]).push([[0],{49:function(e,t,r){},68:function(e,t,r){"use strict";r.r(t);var n=r(0),c=r.n(n),a=r(22),o=r.n(a),i=(r(49),r(17)),s=r(73),u=r(72),j=r(6),l=r(38),b=r(14),O=["Left"],d=r(2),p=r(69),f=function(e){var t=Object(n.useState)(!1),r=Object(j.a)(t,2),c=r[0],a=r[1],o=Array.isArray(e)?e:[e],i=Object(n.useCallback)((function(e){!c&&o.includes(e.code)&&a(!0)}),[].concat(Object(b.a)(o),[c])),s=Object(n.useCallback)((function(e){c&&o.includes(e.code)&&a(!1)}),[].concat(Object(b.a)(o),[c])),u=Object(n.useCallback)((function(){a(!1)}),[]);return Object(n.useEffect)((function(){return window.addEventListener("keydown",i),window.addEventListener("keyup",s),window.addEventListener("blur",u),function(){window.removeEventListener("keydown",i),window.removeEventListener("keyup",s),window.removeEventListener("blur",u)}}),[i,s,u]),c},m=r(71),g=r(12),h=function(){var e=Object(n.useRef)(),t=Object(m.a)("/free-to-pay/models/pumpkman.glb"),r=t.nodes,c=t.materials;return Object(g.jsxs)("group",{ref:e,dispose:null,rotation:[0,-Math.PI/2,0],position:[0,-.5,0],children:[Object(g.jsxs)("group",{position:[-.2,2.41,0],scale:[.21,.21,.21],children:[Object(g.jsx)("mesh",{geometry:r.Cube.geometry,material:c.head}),Object(g.jsx)("mesh",{geometry:r.Cube_1.geometry,material:c.tail}),Object(g.jsx)("mesh",{geometry:r.Cube_2.geometry,material:c.eyes}),Object(g.jsx)("mesh",{geometry:r.Cube_3.geometry,material:c.body})]}),Object(g.jsx)("mesh",{geometry:r.vest.geometry,material:r.vest.material,position:[-.2,2.41,0],scale:[.21,.21,.21]}),Object(g.jsx)("mesh",{geometry:r.pants.geometry,material:r.pants.material,position:[-.2,2.41,0],scale:[.21,.21,.21]})]})};m.a.preload("/free-to-pay/models/pumpkman.glb");var w,x=[.5,.4,1.2],y=[.2,.1,.6];!function(e){e[e.IDLE=0]="IDLE",e[e.ACCELERATION=1]="ACCELERATION",e[e.RUN=2]="RUN",e[e.SLOWDOWN=3]="SLOWDOWN",e[e.MIN_SPEED=4]="MIN_SPEED"}(w||(w={}));var E,v=function(e){var t=e.moveTarget,r=Object(n.useRef)(null),c=f(["ArrowUp","KeyW"]),a=f(["ArrowDown","KeyS"]),o=f(["ArrowLeft","KeyA"]),s=f(["ArrowRight","KeyD"]),u=Object(n.useRef)(0),j=Object(l.a)({maxSpeed:10,minSpeed:1,acceleration:20,slowdown:20,rotationSpeed:5,useKeys:!1,useKeysTurningCoeff:50}),b=j.maxSpeed,O=j.minSpeed,m=j.acceleration,E=j.slowdown,v=j.rotationSpeed,L=j.useKeys,S=j.useKeysTurningCoeff,k=Object(n.useRef)(!1),C=Object(n.useRef)(w.IDLE),D=Object(n.useRef)(new d.Vector3(0,0,0)),M=Object(n.useRef)(new d.Vector3(0,0,0)),A=Object(n.useRef)(new d.Vector3(0,0,0)),R=Object(n.useRef)(0),_=Object(n.useRef)(0);return Object(n.useEffect)((function(){t&&!L&&(C.current!==w.IDLE&&C.current!==w.SLOWDOWN||(C.current=w.ACCELERATION),k.current=!0,t.setY(.75),M.current.subVectors(t,r.current.position).normalize(),A.current.copy(t),r.current.getWorldDirection(D.current),_.current=M.current.angleTo(D.current),M.current.clone().cross(D.current).y>0&&(_.current=-_.current))}),[t]),Object(i.b)((function(e,t){switch(L&&(c||o||s||a?(C.current!==w.IDLE&&C.current!==w.SLOWDOWN||(C.current=w.ACCELERATION),M.current.lerp(new d.Vector3(+s-o,0,+a-c).normalize(),1/S).normalize(),k.current=!0):C.current!==w.RUN&&C.current!==w.ACCELERATION||(C.current=w.SLOWDOWN)),C.current){case w.ACCELERATION:u.current+=m*t,u.current>=b&&(u.current=b,C.current=w.RUN);break;case w.RUN:break;case w.SLOWDOWN:u.current-=E*t,L?u.current<=0&&(u.current=0,C.current=w.IDLE):u.current<=O&&(u.current=O,C.current=w.MIN_SPEED);break;case w.MIN_SPEED:case w.IDLE:}if(C.current!==w.IDLE){if(!L){R.current=A.current.distanceTo(r.current.position),R.current<b*b/(2*E)&&(C.current=w.SLOWDOWN);var n=t*u.current;R.current<n?(r.current.position.copy(A.current),u.current=0,C.current=w.IDLE):r.current.position.addScaledVector(M.current,n)}if(L){var i=t*u.current;r.current.position.addScaledVector(M.current,i)}}if(k.current)if(L)r.current.setRotationFromAxisAngle(new d.Vector3(0,1,0),Math.atan2(M.current.x,M.current.z));else{r.current.getWorldDirection(D.current);var j=t*v;Math.abs(_.current)<j?(r.current.rotateOnAxis(new d.Vector3(0,1,0),_.current),k.current=!1):_.current>0?(_.current-=j,r.current.rotateOnAxis(new d.Vector3(0,1,0),j)):(_.current+=j,r.current.rotateOnAxis(new d.Vector3(0,1,0),-j))}})),Object(g.jsxs)("group",{ref:r,position:[0,.75,0],children:[Object(g.jsx)(p.a,{args:x,rotation:[Math.PI/2,0,0],position:[0,0,0],children:Object(g.jsx)("meshStandardMaterial",{attach:"material",color:"pink"})}),Object(g.jsx)(p.a,{args:[.2,.4,.8],rotation:[Math.PI/2,0,0],position:[0,.1,.75],children:Object(g.jsx)("meshStandardMaterial",{attach:"material",color:"pink"})}),Object(g.jsx)(p.a,{args:y,position:[.2,-.5,.3],children:Object(g.jsx)("meshStandardMaterial",{attach:"material",color:"pink"})}),Object(g.jsx)(p.a,{args:y,position:[-.2,-.5,.3],children:Object(g.jsx)("meshStandardMaterial",{attach:"material",color:"pink"})}),Object(g.jsx)(p.a,{args:y,position:[.2,-.5,-.2],children:Object(g.jsx)("meshStandardMaterial",{attach:"material",color:"pink"})}),Object(g.jsx)(p.a,{args:y,position:[-.2,-.5,-.2],children:Object(g.jsx)("meshStandardMaterial",{attach:"material",color:"pink"})}),Object(g.jsx)("group",{children:Object(g.jsx)(h,{})})]})},L=r(26),S=r(70),k=r.p+"static/media/gravel_ground_01_diff_1k.388a9c56.jpg",C=r.p+"static/media/gravel_ground_01_disp_1k.f7972ada.jpg",D=r.p+"static/media/gravel_ground_01_nor_1k.90f13fb6.jpg",M=r.p+"static/media/gravel_ground_01_rough_1k.75a0f41e.jpg",A=r.p+"static/media/gravel_ground_01_ao_1k.0864f47a.jpg",R=function(e){var t=e.size,r=e.onTerrainPointerDown,c=e.onTerrainPointerMove,a=Object(n.useRef)(null),o=Object(S.a)([k,C,D,M,A]),i=Object(j.a)(o,5),s=i[0],u=i[1],l=i[2],O=i[3],f=i[4];return[s,u,l,O,f].forEach((function(e){e.wrapS!==d.MirroredRepeatWrapping&&(e.wrapS=d.MirroredRepeatWrapping,e.wrapT=d.MirroredRepeatWrapping,e.repeat.set(6,6),e.anisotropy=4)})),Object(g.jsx)(p.b,{visible:!0,position:[0,0,0],rotation:[-Math.PI/2,0,0],ref:a,args:t,onPointerDown:function(e){0===e.button&&r(Object(L.a)(d.Vector3,Object(b.a)(e.point.toArray())))},onPointerMove:function(e){c(Object(L.a)(d.Vector3,Object(b.a)(e.point.toArray())))},children:Object(g.jsx)("meshStandardMaterial",{map:s,roughnessMap:O,normalMap:l,aoMap:f,attach:"material",roughness:1,metalness:0,opacity:1,transparent:!0})})},_=[40,40],I=function(e){var t=e.children,r=function(e){var t=Object(n.useState)(!1),r=Object(j.a)(t,2),c=r[0],a=r[1],o=Array.isArray(e)?e:[e],i=Object(n.useCallback)((function(e){!c&&o.includes(O[e.button])&&a(!0)}),[].concat(Object(b.a)(o),[c]));return Object(n.useEffect)((function(){return window.addEventListener("mouseup",i),function(){window.removeEventListener("mouseup",i)}}),[i]),c}(["Left"]),c=Object(n.useState)(!1),a=Object(j.a)(c,2),o=a[0],s=a[1],u=Object(l.a)({followMouse:!1}).followMouse,d=Object(n.useState)(null),p=Object(j.a)(d,2),f=p[0],m=p[1],h=Object(n.useCallback)((function(e){u&&s(!0),m(e)}),[u,o]),w=Object(n.useCallback)((function(e){u&&o&&m(e)}),[u,o]);return Object(i.b)((function(){r&&o&&s(!1)})),Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)(R,{size:_,onTerrainPointerDown:h,onTerrainPointerMove:w}),Object(g.jsx)("pointLight",{color:"white",intensity:2,position:[10,10,5]}),Object(g.jsx)("ambientLight",{color:"yellow",intensity:.2}),Object(g.jsx)(v,{moveTarget:f}),t]})},N=function(){return Object(g.jsxs)(i.a,{onCreated:function(e){e.gl.setClearColor("#000000")},children:[Object(g.jsx)("axesHelper",{}),Object(g.jsx)(s.a,{makeDefault:!0,position:[0,20,15]}),Object(g.jsx)(u.a,{enabled:!1}),Object(g.jsx)(n.Suspense,{fallback:null,children:Object(g.jsx)(I,{})})]})},W=function(){return Object(g.jsx)("div",{style:{height:"100vh",width:"100vw"},children:Object(g.jsx)(N,{})})};o.a.render(Object(g.jsx)(c.a.StrictMode,{children:Object(g.jsx)(W,{})}),document.getElementById("root")),E&&E instanceof Function&&r.e(3).then(r.bind(null,74)).then((function(e){var t=e.getCLS,r=e.getFID,n=e.getFCP,c=e.getLCP,a=e.getTTFB;t(E),r(E),n(E),c(E),a(E)}))}},[[68,1,2]]]);
//# sourceMappingURL=main.ddc3d163.chunk.js.map